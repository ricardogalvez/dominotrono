///
/// An Individual Portfolio item: ../portfolio/the-portfolio-item
///

.grid-wrapper {
  &__portfolioParent {
    @include media('>=phone') {
      display: block;
    }

    @include media('>=tablet') {
      display: flex;
    }
    //
    // TODO: Determine if this entire code block is still in use...
    //

    &--portfolio-item {
      @include basic-article-wrapper('>=phone', 95vw, 5vw);
      @include basic-article-wrapper('>=tablet', 100vw, 0, 1.5vw);
      @include basic-article-wrapper('>=desktop', 100vw, 0, 0);
      @include media('>=tablet') {
        flex: 1 0 75%;
      }

      .portfolio {
        &__content {
          .portfolio-image-wrapper {
            margin: var(--s05) 0;

            @include media('<=tablet') {
              display: block;
            }

            @include media('>=tablet') {
              display: flex;
            }

            figcaption {
              margin: 3ex 1ex;
            }
          }

          h3 {
            // @include responsive-font(1.5vw, 1.6em, 22px, 32px);
          }
        } // /__content
      }
    }
  }
} // /grid-wrapper

.article-grid-wrapper {
  @include media('<=tablet') {
      display: block;
    }

  display: grid;
  grid-template-columns: var(--s0) minmax(69vw, 800px) minmax(14.95vw, 340px) minmax(10vw, 350px) var(--s0);
  grid-template-rows: auto;
  row-gap: 2ex;
  h1,
  time {
    grid-column: 2 / 4;
    grid-row: 1 / 2;
  }

  &__portfolioParent {
    @include media('>=phone') {
      // display: block;
    }

    @include media('>=tablet') {
      // display: flex;
    }

    grid-column: 1 / -1;
    grid-row: 2 / 4;

    //
    // section headings
    //
    h3 {
      &:first-child {
        margin-bottom: 2ex;
      }

      @include responsive-font(1.5vw, 1.6em, 22px, 32px);
      margin: 4ex 0 0 2.5vw;
    }

    .portfolio__content {
      //
      // uses the same grid styles, but namespaced to differentiate
      //

      .hero-grid,
      .details-grid {
        display: grid;
        // max-width: $wide-screen;
      }
      //  Note:
      //  should only be used at the top of each portfolio case study.
      // TODO: explore possible further abstraction / using these values more globally.
      //

      // hero grid specific variables:
      $hero-rows-phone: #{minmax(225px, auto) minmax(150px, auto)};
      $hero-rows-tablet: #{minmax(475px, auto) minmax(150px, auto)};
      $hero-columns: #{var(--s1) 1fr var(--s1) 1fr var(--s1)};
      $hc: 2fr 1fr;
      //

      .hero-grid {
        @include portfolio-grid('>=phone', $hc, $hero-rows-phone);
        @include portfolio-grid('>=tablet', $hc, $hero-rows-tablet);
        
        figure {
          // max-width: calc(#{$wide-screen} - var(--s0));
          // width: 100%;
        }

        img {
          object-fit: cover;
          width: 100%;
        }

        &__imageBlock {
          margin-left: calc(var(--s0) * -1);
          // margin-right: calc(var(--s0) * -1);
          // margin-inline-end: calc(var(--s0) * -1);
          margin-inline-start: calc(var(--s0) * -1);
          @include add-to-grid('>=phone', 1, -1, 1, 2) 
          // {
          //   // img {
          //   //   left: -5rem;
          //   //   position: relative;
          //   //   top: 0;
          //   //   width: 180%;
          //   // }
          // }

          @include add-to-grid('>=tablet', 1, -1, 1, -1) 
          // {
          //   // img {
          //   //   left: 0;
          //   //   max-width: $wide-screen;
          //   //   width: auto;

          //   // }
          // }
          // overflow: hidden;
        }

        &__copyBlock {
          @include add-to-grid('>=phone', 1, 6, 2, 3);
          @include add-to-grid('>=tablet', 1, -1, 2, 3);
          @include responsive-font(1.8vw, 18px, 32px, 20px);
          background-color: transparentize($site-dark-blue, 0.1);
          // margin: 0;
          padding: var(--s1);
          z-index: 1;
        }
      } // /.hero-grid

      //
      // Each lower section wrapper call gets this class
      // details-grid for secondary and tertiary content layouts
      // details grid specific variables:
      $details-grid-columns: #{1fr 6.5vw 1fr 2.5vw};
      $details-grid-rows: #{minmax(130px, auto) auto};
      //

      .details-grid {
        @include portfolio-grid('>=phone', $details-grid-columns, $details-grid-rows);
        align-items: center;
        margin-top: var(--s0);

        > p {
          margin: var(--s0) 0;
        }

        //
        // twoByTwo: this layout can be used to stack 3 images to the right or left
        // with a copy block on the opposite side..
        &__twoByTwo {
          &.image-block,
          &.copy-block {
            &__left {
              @include add-to-grid('>=phone', 1, -1, auto, auto);
              @include add-to-grid('>=tablet', 1, 2, auto, auto);
            }

            &__right {
              @include add-to-grid('>=phone', 1, -1, auto, auto);
              @include add-to-grid('>=tablet', 3, 4, auto, auto);
            }
          }
          &.image-block {
            &__left,
            &__right {
              @include grid-figcaption;
            }
          }
        } // /twoByTwo

        &__twentyWords {
          &.image-block {
            &__left {
              @include add-to-grid('>=phone', 1, -1, auto, auto);
              @include add-to-grid('>=tablet', 1, 2, auto, auto);
            }

            &__right {
              @include add-to-grid('>=phone', 1, -1, auto, auto);
              @include add-to-grid('>=tablet', 3, 4, auto, auto);
            }
          }

          &.copy-block {
            &__left {
              @include add-to-grid('>=phone', 1, -1, auto, auto);
              @include add-to-grid('>=tablet', 1, 2, auto, auto);
              // padding: 0 0 3ex 3ex;
            }

            &__right {
              @include add-to-grid('>=phone', 1, -1, auto, auto);
              @include add-to-grid('>=tablet', 3, 4, auto, auto);
              // margin: 3ex 0 5ex;
            }
          }
          @include grid-figcaption;
        }

        &__fiftyWords {
          &.big-image {
            @include add-to-grid('>=phone', 1, -1, 1, 2);
            @include add-to-grid('>=tablet', 1, -1, 1, 2);
            @include grid-figcaption;
          }

          &.small-image,
          &.small-image-left {
            @include add-to-grid('>=phone', 1, -1, auto, auto);
            @include add-to-grid('>=tablet', 1, 2, auto, auto);
            @include grid-figcaption;
          }

          &.small-image-right {
            @include add-to-grid('>=phone', 1, -1, auto, auto);
            @include add-to-grid('>=tablet', 3, 4, auto, auto);
            @include grid-figcaption;
          }

          &.copy-block {
            @include add-to-grid('>=phone', 1, -1, auto, auto);
            @include add-to-grid('>=tablet', 3, 4, auto, auto);
          }
        }

        &__sectionHeading {
          @include add-to-grid('>=phone', 1, 6, auto, auto);
          background-color: $site-hot-orange;
        }
      } // /details-grid
    }
  }

  &__portfolioInvolvement {
    background-color: transparentize($site-dark-blue, 0.1);

    @include media('>=phone') {
      grid-column: 2 / 5;
      grid-row: 4 / 5;
      padding: var(--s0);
      width: 100%;
    }

    @include media('>=tablet') {
      grid-column: 3 / 5;
      grid-row: 2 / 3;
      margin-top: var(--s3);
      margin-block-start: var(--s3);
      width: initial;
      z-index: 1;
    }

    h3 {
      font-size: var(--s0);
      margin: var(--s0) 0 0 0;

      &:first-child {
        margin-top: 0;
      }
    }

    p {
      margin: initial;

      &:first-child {
        margin-top: 0;
      }
    }
  }
} // /article-grid-wrapper
