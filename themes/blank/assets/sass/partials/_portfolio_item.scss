///
/// An Individual Portfolio item: ../portfolio/the-portfolio-item
///

.grid-wrapper {
  &__portfolioParent {
    @include media('>=phone') {
      display: block;
    }

    @include media('>=tablet') {
      display: flex;
    }

    &--portfolio-item {
      @include basic-article-wrapper('>=phone', 95vw, 5vw);
      @include basic-article-wrapper('>=tablet', 100vw, 0, 1.5vw);
      @include basic-article-wrapper('>=desktop', 100vw, 0, 0);
      @include media('>=tablet') {
        flex: 1 0 75%;
      }

      .portfolio {
        &__content {
          .portfolio-image-wrapper {
            @include media('<=tablet') {
              display: block;
            }

            @include media('>=tablet') {
              display: flex;
            }

            figcaption {
              margin: 3ex 1ex;
            }

            margin: 0.5em 0;
          }

          h3 {
            @include responsive-font(1.5vw, 1.6em, 22px, 32px);
          }
        } // /__content
      }
    }
  }
} // /grid-wrapper

.article-grid-wrapper {
  display: grid;
  grid-template-columns: 2.5vw 70vw 15vw 10vw 2.5vw;
  grid-template-rows: auto;
  row-gap: 2ex;
  h1,
  time {
    grid-column: 2 / 4;
    grid-row: 1 / 2;
  }

  &__portfolioParent {
    @include media('>=phone') {
      // display: block;
    }

    @include media('>=tablet') {
      // display: flex;
    }

    grid-column: 1 / 6;
    grid-row: 2 / 4;

    .portfolio__content {
      //
      // uses the same grid styles, but namespaced to differentiate
      //

      .hero-grid,
      .details-grid {
        display: grid;
      }
      //  Note:
      //  should only be used at the top of each portfolio case study.
      // TODO: explore possible further abstraction / using these values more globally.
      //

      // hero grid specific variables:
      $hero-rows-phone: #{minmax(320px, auto) minmax(150px, auto)};
      $hero-rows-tablet: #{minmax(475px, auto) minmax(150px, auto)};
      $hero-columns: #{2.5vw 1fr 2.5vw 1fr 2.5vw};
      //

      .hero-grid {
        @include portfolio-grid('>=phone', $hero-columns, $hero-rows-phone);

        @include portfolio-grid('>=tablet', $hero-columns, $hero-rows-tablet);

        &__imageBlock {
          @include add-to-grid('>=phone', 1, 6, 1, 2) {
            img {
              left: -5rem;
              position: relative;
              top: 0;
              width: 180%;
            }
          }

          @include add-to-grid('>=tablet', 1, 6, 1, 3) {
            img {
              left: 0;
              width: 100%;
            }
          }
          overflow: hidden;
        }

        &__copyBlock {
          @include add-to-grid('>=phone', 1, 6, 2, 3);
          @include add-to-grid('>=tablet', 2, 6, 2, 3);
          @include responsive-font(1.8vw, 18px, 32px, 20px);

          background-color: transparentize($site-dark-blue, 0.1);
          margin: 0;
          padding: 3ex;
          z-index: 1;
        }
      } // /.hero-grid

      //
      // Each lower section wrapper call gets this class
      // details-grid for secondary and tertiary content layouts
      // details grid specific variables:
      $details-grid-columns: #{2.5vw 1fr 6.5vw 1fr 2.5vw};
      $details-grid-rows: #{minmax(130px, auto) auto};
      //

      .details-grid {
        margin-top: 8ex;
        @include portfolio-grid(
          '>=phone',
          $details-grid-columns,
          $details-grid-rows
        );
        &__twentyWords {
          &.image-block {
            &__left {
              @include add-to-grid('>=phone', 2, 5, 3, 4);
              @include add-to-grid('>=tablet', 2, 3, 2, 4);
            }

            &__right {
              @include add-to-grid('>=phone', 2, 5, 5, 6);
              @include add-to-grid('>=tablet', 4, 5, 1, 3);
            }
          }
          &.copy-block {
            &__left {
              @include add-to-grid('>=phone', 2, 5, 1, 2);
              @include add-to-grid('>=tablet', 2, 3, 1, 2);
              padding: 0 0 3ex 3ex;
            }

            &__right {
              @include add-to-grid('>=phone', 2, 5, 4, 5);
              @include add-to-grid('>=tablet', 4, 5, 3, 4);
            }
          }

          > figcaption {
            @include media('>=phone') {
              background-color: transparentize($site-dark-blue, 0.2);
              top: -1.5em;
              right: -3em;
              position: relative;
              width: 90%;
            }

            font-style: italic;
            padding: 2ex;
          }
        }

        &__fiftyWords {
          &.big-image {
          }

          &.small-image {
          }

          &.copy-block {
          }
        }

        .image-block {
          // TODO: big refactoring this whole business
          // TODO: should be name spaced by the the number, not by image-block or copy block...
          // 50 Words section
          &__50-words {
            &.primary-image {
              grid-column: 2 / 5;
              grid-row: 1 / 3;
            }
            &.secondary-image {
              grid-column: 2 / 3;
              grid-row: 3 / 5;
            }
          }

          // 20 Words Section
          &__20-words {
            // & > figcaption {
            //   @include media('>=phone') {
            //     background-color: transparentize($site-dark-blue, 0.2);
            //     top: -1.5em;
            //     right: -3em;
            //     position: relative;
            //     width: 90%;
            //   }

            //   font-style: italic;
            //   padding: 2ex;
            // }

            // &.left {
            //   // @include media('>=phone') {
            //   //   grid-column: 2 / 5;
            //   //   grid-row: 3 / 4;
            //   // }
            //   // @include media('>=tablet') {
            //   //   grid-column: 2 / 3;
            //   //   grid-row: 2 / 4;
            //   // }
            // }
            // less than ideal, but this is the most expedient...
            // TODO: not this...

            // &.right {
            //   // @include media('>=phone') {
            //   //   grid-column: 2 / 5;
            //   //   grid-row: 5 / 6;
            //   // }
            //   // @include media('>=tablet') {
            //   //   grid-column: 4 / 5;
            //   //   grid-row: 1 / 3;
            //   // }
            // }
          }
        } // /.image-block

        .copy-block {
          &__50-words {
            grid-column: 4 / 5;
            grid-row: 3 / 5;
          }

          &__20-words {
            // &.left {
            //   // @include media('>=phone') {
            //   //   grid-column: 2 / 5;
            //   //   grid-row: 1 / 2;
            //   // }
            //   // @include media('>=tablet') {
            //   //   grid-column: 2 / 3;
            //   //   grid-row: 1 / 2;
            //   // padding: 0 0 3ex 3ex;
            //   // }
            // }

            // &.right {
            //   // @include media('>=phone') {
            //   //   grid-column: 2 / 5;
            //   //   grid-row: 4 / 5;
            //   // }
            //   // @include media('>=tablet') {
            //   //   grid-column: 4 / 5;
            //   //   grid-row: 3 / 4;
            //   // }
            // }
          }
        }
      } // /details-grid
    }
  }

  &__portfolioInvolvement {
    @include media('>=phone') {
      grid-column: 2 / 5;
      grid-row: 4 / 5;
      padding: 1ex;
      width: 100%;
    }

    @include media('>=tablet') {
      grid-column: 3 / 5;
      grid-row: 2 / 3;
      margin: -4ex 0 0 0;
      padding: 2.5ex 5.5ex 10ex;
      // padding: calc(100% - 15vh) calc(100% - 22vw) calc(100% - 13vh);
      width: initial;
      z-index: 1;
    }

    background-color: transparentize($site-dark-blue, 0.1);
  }
} // /article-grid-wrapper

/// refactor playground

// make them so:

.details-grid {
  // put a mixin here...?
  // new label for 20-words:
  &__two-by-two {
    // things
  }
  // new label for 50-words

  &__one-over-two {
    // other things
  }
}
